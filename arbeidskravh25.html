<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arbeidskrav PGR102</title>
    <link rel="stylesheet" href="arbeidskrav.css" />
</head>
<!-- HTML KODEN TRENGER DU IKKE RØRE FOR Å LØSE OPPGAVENE. DU SKAL KUN KODE I SCRIPT -->

<body>
    <div class="main-container">
        <div class="hero-health-containers">
            <div class="healthbar-container">
                <!-- healer-health sin vidde må forandres for å endre lifebar -->
                <div id="healer-health" class="healthbar"></div>
                <div class="text-container">
                    <!-- Disse må forandres på for å endre på navn og HP -->
                    <p id="healer-name-txt">Healerens navn</p>
                    <p id="healer-health-txt">400 / 400 HP</p>
                </div>
            </div>
            <div class="healthbar-container">
                <!-- archer-health sin vidde må forandres for å endre lifebar -->
                <div id="archer-health" class="healthbar"></div>
                <div class="text-container">
                    <!-- Disse må forandres på for å endre på navn og HP -->
                    <p id="archer-name-txt">Archerens navn</p>
                    <p id="archer-health-txt">600 / 600 HP</p>
                </div>
            </div>
            <div class="healthbar-container">
                <!-- warrior-health sin vidde må forandres for å endre lifebar -->
                <div id="warrior-health" class="healthbar"></div>
                <div class="text-container">
                    <!-- Disse må forandres på for å endre på navn og HP -->
                    <p id="warrior-name-txt">Warriorens navn</p>
                    <p id="warrior-health-txt">800 / 800 HP</p>
                </div>
            </div>
        </div>

        <!-- Healthbar til fienden -->
        <div class="dragon-health-container">
            <div class="healthbar-container">
                <!-- dragon-health sin vidde må forandres for å endre lifebar -->
                <div id="dragon-health" class="healthbar"></div>
                <div class="text-container">
                    <!-- Disse må forandres på for å endre på navn og HP -->
                    <p id="dragon-name-txt">Dragens navn</p>
                    <div id="dragon-health-txt" class="text-container">
                        2000 / 2000 HP
                    </div>
                </div>
            </div>
        </div>

        <!-- Bildecontainere for heroene. Disse bilde-containerne skal kunne trykkes på  -->
        <div id="healer" class="img-container">
            <img class="hero" src="assets/healer.png" />
        </div>
        <div id="archer" class="img-container">
            <img class="hero" src="assets/archer.png" />
        </div>
        <div id="warrior" class="img-container">
            <img class="hero" src="assets\warrior.png" />
        </div>

        <!-- Bildecontainer for fienden -->
        <div id="dragon" class="img-container">
            <img id="dragon-img" src="assets\dragon.png" />
        </div>
    </div>
    <script>
        //Denne JS-koden er laget klar for deg. Den trenger du ikke endre på. :-)
        //Stats for heroes: Du må ikke bruke alle stats videre i programmet ditt hvis du ikke ser det nødvendig.
        //Husk at for å hente ut noe fra et objekt som er i et array kan vi skrive for eksempel slik: heroesArray[1].name (Ariana Archer)

        let heroesArray = [
            {
                id: 0,
                name: "Henriette Healer",
                maxHP: 400, //Denne er oppdatert og satt inn 09.10.2025
                currentHP: 400,
                damage: 100,
                alive: true,
            },
            {
                id: 1,
                name: "Ariana Archer",
                maxHP: 600, //Denne er oppdatert og satt inn 09.10.2025
                currentHP: 600,
                damage: 400,
                alive: true,
            },
            {
                id: 2,
                name: "Wyona Warrior",
                maxHP: 800,
                currentHP: 800,
                damage: 400,
                alive: true,
            },
        ];

        let dragonStats = {
            name: "Daar Dragon",
            maxHP: 2000,
            currentHP: 2000,
            damage: 200,
            alive: true,
        };

        //Bildene som skal kunne trykkes på
        const healer = document.getElementById("healer");
        const archer = document.getElementById("archer");
        const warrior = document.getElementById("warrior");

        const dragon = document.getElementById("dragon");

        //Navnene til heltene og dragen som kan oppdateres med riktig navn (tilleggsfunksjonalitet)
        const healerName = document.getElementById("healer-name-txt");
        const archerName = document.getElementById("archer-name-txt");
        const warriorName = document.getElementById("warrior-name-txt");

        const dragonName = document.getElementById("dragon-name-txt");

        //HP-tekstene til heltene som skal kunne oppdatere seg (tilleggsfunksjonalitet)
        const healerHealthTxt = document.getElementById("healer-health-txt");
        const archerHealthTxt = document.getElementById("archer-health-txt");
        const warriorHealthTxt = document.getElementById("warrior-health-txt");

        //HP-teksten til dragen som kan oppdatere seg (tilleggsfunksjonalitet)
        const dragonHealthTxt = document.getElementById("dragon-health-txt");

        //Healthbars som må oppdateres for at grønnfargen skal bli mindre når HP blir mindre (tilleggsfunksjonalitet)
        const healerHealthBar = document.getElementById("healer-health");
        const archerHealthBar = document.getElementById("archer-health");
        const warriorHealthBar = document.getElementById("warrior-health");

        const dragonHealthBar = document.getElementById("dragon-health");

        //Her kommer din kode! :o
        //Setter navn på heltene og dragen
        healerName.innerHTML = heroesArray[0].name;
        archerName.innerHTML = heroesArray[1].name;
        warriorName.innerHTML = heroesArray[2].name;
        dragonName.innerHTML = dragonStats.name;

        //Legger til motangrep fra dragen
        function dragonAttack() {
            if (dragonStats.alive) {
                let aliveHeroes = heroesArray.filter(hero => hero.alive);
                let heroAttack = Math.floor(Math.random() * aliveHeroes.length);
                aliveHeroes[heroAttack].currentHP -= dragonStats.damage;

                alert(`Dragen angriper ${aliveHeroes[heroAttack].name} for ${dragonStats.damage} skade!`);

                // Oppdater HP-tekst, healthbar og sjekker om helten døde
                if (aliveHeroes[heroAttack].name === "Henriette Healer") {
                    healerHealthTxt.innerHTML = `${aliveHeroes[heroAttack].currentHP} / ${aliveHeroes[heroAttack].maxHP} HP`;
                    healerHealthBar.style.width = `${(aliveHeroes[heroAttack].currentHP / aliveHeroes[heroAttack].maxHP) * 300}px`;
                    if (heroesArray[0].currentHP <= 0) {
                        heroesArray[0].currentHP = 0;
                        heroesArray[0].alive = false;
                        alert(`${heroesArray[0].name} døde!`);
                        healer.remove();
                        healerHealthTxt.innerHTML = `0 / ${heroesArray[0].maxHP} HP`;
                        healerHealthBar.style.width = `0px`;
                    }
                } 
                else if (aliveHeroes[heroAttack].name === "Ariana Archer") {
                    archerHealthTxt.innerHTML = `${aliveHeroes[heroAttack].currentHP} / ${aliveHeroes[heroAttack].maxHP} HP`;
                    archerHealthBar.style.width = `${(aliveHeroes[heroAttack].currentHP / aliveHeroes[heroAttack].maxHP) * 300}px`;
                    if (heroesArray[1].currentHP <= 0) {
                        heroesArray[1].currentHP = 0;
                        heroesArray[1].alive = false;
                        alert(`${heroesArray[1].name} døde!`);
                        archer.remove();
                        archerHealthTxt.innerHTML = `0 / ${heroesArray[1].maxHP} HP`;
                        archerHealthBar.style.width = `0px`;
                    }
                } 
                else if (aliveHeroes[heroAttack].name === "Wyona Warrior") {
                    warriorHealthTxt.innerHTML = `${aliveHeroes[heroAttack].currentHP} / ${aliveHeroes[heroAttack].maxHP} HP`;
                    warriorHealthBar.style.width = `${(aliveHeroes[heroAttack].currentHP / aliveHeroes[heroAttack].maxHP) * 300}px`;
                    if (heroesArray[2].currentHP <= 0) {
                        heroesArray[2].currentHP = 0;
                        heroesArray[2].alive = false;
                        alert(`${heroesArray[2].name} døde!`);
                        warrior.remove();
                        warriorHealthTxt.innerHTML = `0 / ${heroesArray[2].maxHP} HP`;
                        warriorHealthBar.style.width = `0px`;
                    }
                }

                
            }
        }

        function checkPlayerStatus() {
            if (dragonStats.alive == false) {
                alert("Gratulerer du har vunnet spillet!");
                dragon.remove(); // Fjerner graffikken på dragen
            }
            else if (heroesArray[0].alive == false && heroesArray[1].alive==false && heroesArray[2].alive==false) {
                alert("Dragen vant!");

            }
        };


        //Legger til angrep for heltene
        healer.addEventListener("click", function() {
            if (heroesArray[0].alive && dragonStats.alive) {
                // Healer angriper + alert
                alert("healer angrep for " + heroesArray[0].damage + " skade!");
                dragonStats.currentHP -= heroesArray[0].damage;
                dragonHealthBar.style.width = `${(dragonStats.currentHP / dragonStats.maxHP) * 300}px`;

                //Sjekker om dragen dævva
                if (dragonStats.currentHP <= 0) {
                    dragonStats.currentHP = 0;
                    dragonStats.alive = false;
                    alert("Dragen dævva")
                }
                
                dragonHealthTxt.innerHTML = `${dragonStats.currentHP} / ${dragonStats.maxHP} HP`;
                //Venter i 2 sekunder før noe nytt skjer
                setTimeout(() => {
                    // Dragen angriper tilbake
                    dragonAttack();
                    // Sjekker status og om noen har vunent
                    checkPlayerStatus();
                }, 2500);
                };
            });

        archer.addEventListener("click", function() {
            if (heroesArray[1].alive && dragonStats.alive) {
                // Healer angriper + alert
                alert("Archer angrep for " + heroesArray[1].damage + " skade!");
                dragonStats.currentHP -= heroesArray[1].damage;
                dragonHealthBar.style.width = `${(dragonStats.currentHP / dragonStats.maxHP) * 300}px`;

                if (dragonStats.currentHP <= 0) {
                    dragonStats.currentHP = 0;
                    dragonStats.alive = false;
                    alert("Dragen dævva")
                }
                
                dragonHealthTxt.innerHTML = `${dragonStats.currentHP} / ${dragonStats.maxHP} HP`;
                
                setTimeout(() => {
                    // Dragen angriper tilbake
                    dragonAttack();
                    // Sjekker status og om noen har vunent
                    checkPlayerStatus();
                }, 2500);
            };
        });

        warrior.addEventListener("click", function() {
            if (heroesArray[2].alive && dragonStats.alive) {
                // Healer angriper + alert
                alert("Warrior angrep for " + heroesArray[2].damage + " skade!");
                dragonStats.currentHP -= heroesArray[2].damage;
                dragonHealthBar.style.width = `${(dragonStats.currentHP / dragonStats.maxHP) * 300}px`;


                
                if (dragonStats.currentHP <= 0) {
                    dragonStats.currentHP = 0;
                    dragonStats.alive = false;
                    alert("Dragen dævva")
                }
                
                dragonHealthTxt.innerHTML = `${dragonStats.currentHP} / ${dragonStats.maxHP} HP`;
                
                setTimeout(() => {
                    // Dragen angriper tilbake
                    dragonAttack();
                    // Sjekker status og om noen har vunent
                    checkPlayerStatus();
                }, 2500);

            };
        });

        
        
        
        


    </script>
</body>

</html>